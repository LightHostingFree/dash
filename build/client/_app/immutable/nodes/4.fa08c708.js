import{S as V,i as Y,s as G,a as B,y as J,k,q as U,c as E,z as K,l as w,m as N,r as $,h as o,n as v,b as _,A as Q,D as T,L as q,g as I,d as S,f as W,u as X,B as Z,N as g,a3 as z,_ as tt,$ as et,a0 as st,v as at}from"../chunks/index.c676ab83.js";import{e as lt}from"../chunks/public.e27fc8de.js";import"../chunks/paths.6e21c0d1.js";import{m as D}from"../chunks/stores.848b0f50.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.314e35e5.js";import{f as P}from"../chunks/index.3cde08c5.js";import{M as it}from"../chunks/Modal.43f3f8c9.js";import"../chunks/sentry-release-injection-file.7de3efab.js";function F(d){let e,a,f,c,l,p,b,m,r,y,A;return{c(){e=k("div"),a=k("button"),f=U("✕"),c=B(),l=k("iframe"),this.h()},l(u){e=w(u,"DIV",{class:!0});var n=N(e);a=w(n,"BUTTON",{class:!0});var L=N(a);f=$(L,"✕"),L.forEach(o),c=E(n),l=w(n,"IFRAME",{class:!0,src:!0,title:!0,frameborder:!0}),N(l).forEach(o),n.forEach(o),this.h()},h(){v(a,"class","absolute top-0 right-2 p-3 text-white text-2xl"),v(l,"class","w-screen h-screen aspect-video rounded-container-token overflow-hidden"),z(l.src,p=d[2])||v(l,"src",p),v(l,"title","Analytics"),v(l,"frameborder","0"),v(e,"class","fixed inset-0 z-50 w-screen h-screen bg-black bg-opacity-50 flex items-center justify-center")},m(u,n){_(u,e,n),T(e,a),T(a,f),T(e,c),T(e,l),r=!0,y||(A=q(a,"click",d[3]),y=!0)},p(u,n){(!r||n&4&&!z(l.src,p=u[2]))&&v(l,"src",p)},i(u){r||(tt(()=>{r&&(m&&m.end(1),b=et(e,P,{duration:150}),b.start())}),r=!0)},o(u){b&&b.invalidate(),m=st(e,P,{duration:150}),r=!1},d(u){u&&o(e),u&&m&&m.end(),y=!1,A()}}}function rt(d){let e,a,f,c,l=d[0].domain.name+"",p,b,m,r,y,A,u,n,L,j,h,M,R,O,x,i=d[1]&&F(d);return a=new it({}),{c(){i&&i.c(),e=B(),J(a.$$.fragment),f=B(),c=k("h2"),p=U(l),b=U(".is-cool.me"),m=B(),r=k("br"),y=B(),A=k("br"),u=B(),n=k("button"),L=U("Analytics"),j=B(),h=k("button"),M=U("how to set up analytics"),this.h()},l(t){i&&i.l(t),e=E(t),K(a.$$.fragment,t),f=E(t),c=w(t,"H2",{class:!0});var s=N(c);p=$(s,l),b=$(s,".is-cool.me"),s.forEach(o),m=E(t),r=w(t,"BR",{}),y=E(t),A=w(t,"BR",{}),u=E(t),n=w(t,"BUTTON",{class:!0});var C=N(n);L=$(C,"Analytics"),C.forEach(o),j=E(t),h=w(t,"BUTTON",{class:!0});var H=N(h);M=$(H,"how to set up analytics"),H.forEach(o),this.h()},h(){v(c,"class","h2"),v(n,"class","btn variant-filled"),v(h,"class","text-sm text-gray-500 mt-2")},m(t,s){i&&i.m(t,s),_(t,e,s),Q(a,t,s),_(t,f,s),_(t,c,s),T(c,p),T(c,b),_(t,m,s),_(t,r,s),_(t,y,s),_(t,A,s),_(t,u,s),_(t,n,s),T(n,L),_(t,j,s),_(t,h,s),T(h,M),R=!0,O||(x=[q(n,"click",d[4]),q(h,"click",d[5])],O=!0)},p(t,[s]){t[1]?i?(i.p(t,s),s&2&&I(i,1)):(i=F(t),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(at(),S(i,1,1,()=>{i=null}),W()),(!R||s&1)&&l!==(l=t[0].domain.name+"")&&X(p,l)},i(t){R||(I(i),I(a.$$.fragment,t),R=!0)},o(t){S(i),S(a.$$.fragment,t),R=!1},d(t){i&&i.d(t),t&&o(e),Z(a,t),t&&o(f),t&&o(c),t&&o(m),t&&o(r),t&&o(y),t&&o(A),t&&o(u),t&&o(n),t&&o(j),t&&o(h),O=!1,g(x)}}}function ot(d,e,a){let{data:f}=e;console.log(f.domain.record);let c=!1;f.hosting;let l;const p=()=>{a(1,c=!1)},b=async()=>{let r=await fetch(`/api/domains/${f.domain.name}/analytics`).then(y=>y.json());r.url?(a(2,l=r.url),a(1,c=!0)):D.trigger({type:"alert",title:"Analytics not available",body:r.error})},m=()=>{D.trigger({type:"alert",title:"How to set up analytics",body:`To set up analytics, you need to add the following HTML code to your website: <br /><br /><code>&lt;script defer data-domain="${f.domain.name}.is-cool.me" src="${lt.PUBLIC_ANALYTICS_URL}/js/script.js"&gt;&lt;/script&gt;</code>`})};return d.$$set=r=>{"data"in r&&a(0,f=r.data)},[f,c,l,p,b,m]}class bt extends V{constructor(e){super(),Y(this,e,ot,rt,G,{data:0})}}export{bt as component};
//# sourceMappingURL=4.fa08c708.js.map
