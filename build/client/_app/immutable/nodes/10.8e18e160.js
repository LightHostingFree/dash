import{S as te,i as le,s as re,k as T,q as P,a as L,e as D,l as M,m as A,r as $,h as g,c as C,n as w,b as N,D as E,u as G,d as I,f as F,g as S,v as V,y as K,z as Q,A as W,a1 as B,_ as Y,$ as Z,a0 as oe,B as x,L as R,a2 as ee,N as ae}from"../chunks/index.c676ab83.js";import{g as ne}from"../chunks/navigation.ddd6bc37.js";import{F as ie}from"../chunks/fa.3821bd40.js";import{t as j}from"../chunks/stores.73e18257.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.314e35e5.js";import{f as U}from"../chunks/index.3cde08c5.js";import{P as se}from"../chunks/ProgressRadial.90f2db42.js";import{c as ce}from"../chunks/index.4f6188fb.js";import"../chunks/sentry-release-injection-file.7de3efab.js";function q(a,e,t){const o=a.slice();return o[9]=e[t],o[10]=e,o[11]=t,o}function z(a,e,t){const o=a.slice();return o[9]=e[t],o}function ue(a){let e,t,o,s,u;return t=new se({props:{class:"mt-5",size:"small"}}),{c(){e=T("div"),K(t.$$.fragment),this.h()},l(i){e=M(i,"DIV",{class:!0});var r=A(e);Q(t.$$.fragment,r),r.forEach(g),this.h()},h(){w(e,"class","flex flex-col gap-5")},m(i,r){N(i,e,r),W(t,e,null),u=!0},p:B,i(i){u||(S(t.$$.fragment,i),Y(()=>{u&&(s&&s.end(1),o=Z(e,U,{duration:300}),o.start())}),u=!0)},o(i){I(t.$$.fragment,i),o&&o.invalidate(),s=oe(e,U,{duration:300}),u=!1},d(i){i&&g(e),x(t),i&&s&&s.end()}}}function fe(a){let e,t,o,s,u,i,r,c,m,n,d,l=a[3],_=[];for(let f=0;f<l.length;f+=1)_[f]=H(z(a,l,f));const v=[he,de],k=[];function p(f,y){return f[2].length>0?0:1}return i=p(a),r=k[i]=v[i](a),{c(){e=T("div"),t=T("select"),o=T("option"),s=P("Add record ");for(let f=0;f<_.length;f+=1)_[f].c();u=L(),r.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var y=A(e);t=M(y,"SELECT",{class:!0});var b=A(t);o=M(b,"OPTION",{});var h=A(o);s=$(h,"Add record "),h.forEach(g);for(let O=0;O<_.length;O+=1)_[O].l(b);b.forEach(g),u=C(y),r.l(y),y.forEach(g),this.h()},h(){o.__value="",o.value=o.__value,o.selected=!0,o.disabled=!0,w(t,"class","select mb-2"),w(e,"class","flex flex-col gap-5")},m(f,y){N(f,e,y),E(e,t),E(t,o),E(o,s);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(t,null);E(e,u),k[i].m(e,null),m=!0,n||(d=R(t,"change",a[5]),n=!0)},p(f,y){if(y&12){l=f[3];let h;for(h=0;h<l.length;h+=1){const O=z(f,l,h);_[h]?_[h].p(O,y):(_[h]=H(O),_[h].c(),_[h].m(t,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=l.length}let b=i;i=p(f),i===b?k[i].p(f,y):(V(),I(k[b],1,1,()=>{k[b]=null}),F(),r=k[i],r?r.p(f,y):(r=k[i]=v[i](f),r.c()),S(r,1),r.m(e,null))},i(f){m||(S(r),c||Y(()=>{c=Z(e,U,{duration:300}),c.start()}),m=!0)},o(f){I(r),m=!1},d(f){f&&g(e),ee(_,f),k[i].d(),n=!1,d()}}}function _e(a){let e,t=a[9].type+"",o;return{c(){e=T("option"),o=P(t),this.h()},l(s){e=M(s,"OPTION",{});var u=A(e);o=$(u,t),u.forEach(g),this.h()},h(){e.__value=a[9].type,e.value=e.__value},m(s,u){N(s,e,u),E(e,o)},p:B,d(s){s&&g(e)}}}function pe(a){let e,t=a[9].type+"",o;return{c(){e=T("option"),o=P(t),this.h()},l(s){e=M(s,"OPTION",{});var u=A(e);o=$(u,t),u.forEach(g),this.h()},h(){e.__value="",e.value=e.__value,e.disabled=!0},m(s,u){N(s,e,u),E(e,o)},p:B,d(s){s&&g(e)}}}function H(a){let e,t;function o(...r){return a[4](a[9],...r)}function s(r,c){return c&4&&(e=null),e==null&&(e=!!(!r[9].allowMultiple&&r[2].find(ve)||r[2].find(o))),e?pe:_e}let u=s(a,-1),i=u(a);return{c(){i.c(),t=D()},l(r){i.l(r),t=D()},m(r,c){i.m(r,c),N(r,t,c)},p(r,c){a=r,u===(u=s(a,c))&&i?i.p(a,c):(i.d(1),i=u(a),i&&(i.c(),i.m(t.parentNode,t)))},d(r){i.d(r),r&&g(t)}}}function de(a){let e,t;return{c(){e=T("p"),t=P("Add a record to your domain to get started.")},l(o){e=M(o,"P",{});var s=A(e);t=$(s,"Add a record to your domain to get started."),s.forEach(g)},m(o,s){N(o,e,s),E(e,t)},p:B,i:B,o:B,d(o){o&&g(e)}}}function he(a){let e,t,o,s,u,i,r=a[2],c=[];for(let n=0;n<r.length;n+=1)c[n]=J(q(a,r,n));const m=n=>I(c[n],1,1,()=>{c[n]=null});return{c(){for(let n=0;n<c.length;n+=1)c[n].c();e=L(),t=T("button"),o=P("Save"),this.h()},l(n){for(let l=0;l<c.length;l+=1)c[l].l(n);e=C(n),t=M(n,"BUTTON",{class:!0});var d=A(t);o=$(d,"Save"),d.forEach(g),this.h()},h(){w(t,"class","btn variant-filled-success mt-5")},m(n,d){for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(n,d);N(n,e,d),N(n,t,d),E(t,o),s=!0,u||(i=R(t,"click",a[8]),u=!0)},p(n,d){if(d&4){r=n[2];let l;for(l=0;l<r.length;l+=1){const _=q(n,r,l);c[l]?(c[l].p(_,d),S(c[l],1)):(c[l]=J(_),c[l].c(),S(c[l],1),c[l].m(e.parentNode,e))}for(V(),l=r.length;l<c.length;l+=1)m(l);F()}},i(n){if(!s){for(let d=0;d<r.length;d+=1)S(c[d]);s=!0}},o(n){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)I(c[d]);s=!1},d(n){ee(c,n),n&&g(e),n&&g(t),u=!1,i()}}}function J(a){let e,t,o=a[9].type+"",s,u,i,r,c,m,n,d,l,_,v,k,p;function f(...b){return a[6](a[9],a[10],a[11],...b)}_=new ie({props:{icon:ce}});function y(){return a[7](a[9])}return{c(){e=T("div"),t=T("label"),s=P(o),i=L(),r=T("input"),d=L(),l=T("button"),K(_.$$.fragment),this.h()},l(b){e=M(b,"DIV",{class:!0});var h=A(e);t=M(h,"LABEL",{class:!0,for:!0});var O=A(t);s=$(O,o),O.forEach(g),i=C(h),r=M(h,"INPUT",{class:!0,type:!0,placeholder:!0,id:!0}),d=C(h),l=M(h,"BUTTON",{class:!0});var X=A(l);Q(_.$$.fragment,X),X.forEach(g),h.forEach(g),this.h()},h(){w(t,"class","label"),w(t,"for",u=a[9].type),w(r,"class","input"),w(r,"type","text"),w(r,"placeholder",c=a[9].type),w(r,"id",m=a[9].type),r.value=n=a[9].value||"",w(l,"class","btn variant-filled-error"),w(e,"class","flex items-center gap-2")},m(b,h){N(b,e,h),E(e,t),E(t,s),E(e,i),E(e,r),E(e,d),E(e,l),W(_,l,null),v=!0,k||(p=[R(r,"change",f),R(l,"click",y)],k=!0)},p(b,h){a=b,(!v||h&4)&&o!==(o=a[9].type+"")&&G(s,o),(!v||h&4&&u!==(u=a[9].type))&&w(t,"for",u),(!v||h&4&&c!==(c=a[9].type))&&w(r,"placeholder",c),(!v||h&4&&m!==(m=a[9].type))&&w(r,"id",m),(!v||h&4&&n!==(n=a[9].value||"")&&r.value!==n)&&(r.value=n)},i(b){v||(S(_.$$.fragment,b),v=!0)},o(b){I(_.$$.fragment,b),v=!1},d(b){b&&g(e),x(_),k=!1,ae(p)}}}function me(a){let e,t,o=a[0].domain.name+"",s,u,i,r,c,m,n,d,l;const _=[fe,ue],v=[];function k(p,f){return p[1]?1:0}return m=k(a),n=v[m]=_[m](a),{c(){e=T("h2"),t=P("Editing "),s=P(o),u=P(".is-cool.me"),i=L(),r=T("br"),c=L(),n.c(),d=D(),this.h()},l(p){e=M(p,"H2",{class:!0});var f=A(e);t=$(f,"Editing "),s=$(f,o),u=$(f,".is-cool.me"),f.forEach(g),i=C(p),r=M(p,"BR",{}),c=C(p),n.l(p),d=D(),this.h()},h(){w(e,"class","h2")},m(p,f){N(p,e,f),E(e,t),E(e,s),E(e,u),N(p,i,f),N(p,r,f),N(p,c,f),v[m].m(p,f),N(p,d,f),l=!0},p(p,[f]){(!l||f&1)&&o!==(o=p[0].domain.name+"")&&G(s,o);let y=m;m=k(p),m===y?v[m].p(p,f):(V(),I(v[y],1,1,()=>{v[y]=null}),F(),n=v[m],n?n.p(p,f):(n=v[m]=_[m](p),n.c()),S(n,1),n.m(d.parentNode,d))},i(p){l||(S(n),l=!0)},o(p){I(n),l=!1},d(p){p&&g(e),p&&g(i),p&&g(r),p&&g(c),v[m].d(p),p&&g(d)}}}const ve=a=>a.allowMultiple===!1;function be(a,e,t){let{data:o}=e,s=!1,u=o.domain.record||[],i=[{type:"CNAME",allowMultiple:!1},{type:"A",allowMultiple:!1},{type:"URL",allowMultiple:!1},{type:"MX",allowMultiple:!0},{type:"TXT",allowMultiple:!0}];u.forEach(l=>{l.allowMultiple=i.find(_=>_.type===l.type).allowMultiple});const r=(l,_)=>_.type===l.type,c=l=>{l.target.value!==""&&t(2,u=[...u,i.find(_=>_.type===l.target.value)]),l.target.value=""},m=(l,_,v,k)=>t(2,_[v].value=k.target.value,u),n=l=>t(2,u=u.filter(_=>_.type!==l.type)),d=async()=>{t(1,s=!0);let l=`/api/domains/${o.domain.name}/edit?`,_={records:JSON.stringify(u)};for(const[k,p]of Object.entries(_))l+=`${k}=${p}&`;let v=await fetch(l,{method:"PATCH"}).then(k=>k.json()).catch(k=>(console.error(k),{error:!0}));if(v.error){j.trigger({background:"variant-filled-error",message:`${v.error}`,timeout:3e3}),t(1,s=!1);return}t(1,s=!1),j.trigger({background:"variant-filled-success",message:"Successfully updated records.",timeout:3e3}),ne("/domains/"+o.domain.name)};return a.$$set=l=>{"data"in l&&t(0,o=l.data)},[o,s,u,i,r,c,m,n,d]}class Oe extends te{constructor(e){super(),le(this,e,be,me,re,{data:0})}}export{Oe as component};
//# sourceMappingURL=10.8e18e160.js.map
