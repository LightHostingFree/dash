{"version":3,"file":"plausible-a57c7257.js","sources":["../../../../src/lib/plausible.js"],"sourcesContent":["import { env } from '$env/dynamic/private';\n\nfunction isRegistered(subdomain) {\n\treturn fetch(`${env.PLAUSIBLE_API_PATH}/sites/${subdomain}.is-cool.me`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${env.PLAUSIBLE_API_KEY}`\n\t\t}\n\t})\n\t\t.then((response) => {\n\t\t\tif (response.status === 200) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.log(error);\n\t\t\treturn false;\n\t\t});\n}\n\nasync function registerSite(subdomain) {\n\tlet response = await fetch(`${env.PLAUSIBLE_API_PATH}/sites`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${env.PLAUSIBLE_API_KEY}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tdomain: `${subdomain}.is-cool.me`\n\t\t})\n\t});\n\tlet data = await response.json();\n\treturn data;\n}\nasync function generateLink(subdomain) {\n\tlet response = await fetch(`${env.PLAUSIBLE_API_PATH}/sites/shared-links`, {\n\t\tmethod: 'PUT',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${env.PLAUSIBLE_API_KEY}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tsite_id: `${subdomain}.is-cool.me`,\n\t\t\tname: 'View stats for owner of this domain'\n\t\t})\n\t});\n\tlet data = await response.json();\n\treturn data;\n}\n\nexport { registerSite, generateLink, isRegistered };\n"],"names":["env"],"mappings":";;;AAuBA,eAAA,YAAA,CAAA,SAAA,EAAA;AACA,EAAA,IAAA,QAAA,GAAA,MAAA,KAAA,CAAA,CAAA,EAAAA,WAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,EAAA;AAAA,IACA,MADA,EACA,MADA;AACA,IACA,OADA,EACA;AAAA,MACA,cADA,EACA,kBADA;AACA,MACA,aADA,EACA,CADA,OAAA,EACAA,WADA,CACA,iBAAA,CADA,CAAA;AACA,KAAA;AACA,IACA,IADA,EACA,IADA,CACA,SADA,CACA;AAAA,MACA,MADA,EACA,CADA,EACA,SAAA,CADA,WAAA,CAAA;AACA,KACA,CADA;AACA,GACA,CADA,CAAA;AAEA,EAAA,IAAA,IAAA,GAAA,MAAA,QAAA,CAAA,IAAA,EAAA,CAAA;AACA,EAAA,OAAA,IAAA,CAAA;AACA,CAAA;AACA,eAAA,YAAA,CAAA,SAAA,EAAA;AACA,EAAA,IAAA,QAAA,GAAA,MAAA,KAAA,CAAA,CAAA,EAAAA,WAAA,CAAA,kBAAA,CAAA,mBAAA,CAAA,EAAA;AAAA,IACA,MADA,EACA,KADA;AACA,IACA,OADA,EACA;AAAA,MACA,cADA,EACA,kBADA;AACA,MACA,aADA,EACA,CADA,OAAA,EACAA,WADA,CACA,iBAAA,CADA,CAAA;AACA,KAAA;AACA,IACA,IADA,EACA,IADA,CACA,SADA,CACA;AAAA,MACA,OADA,EACA,CADA,EACA,SAAA,CADA,WAAA,CAAA;AACA,MACA,IADA,EACA,qCADA;AACA,KACA,CADA;AACA,GACA,CADA,CAAA;AAEA,EAAA,IAAA,IAAA,GAAA,MAAA,QAAA,CAAA,IAAA,EAAA,CAAA;AACA,EAAA,OAAA,IAAA,CAAA;AACA;;;;"}